--t2
-- SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED --dirty read
SET TRANSACTION ISOLATION LEVEL READ COMMITTED
SELECT *
FROM PRODUCT

--T2
-- SET TRANSACTION ISOLATION LEVEL READ COMMITTED  -- lost update
SET TRANSACTION ISOLATION LEVEL REPEATABLE READ
BEGIN TRAN
DECLARE @qty INT
SELECT @qty = Quatity FROM PRODUCT WHERE ID=2
SET @qty = @qty -4
WAITFOR DELAY '00:00:10'
UPDATE PRODUCT SET Quatity = @qty WHERE ID=2
COMMIT

--T2
-- SET TRANSACTION ISOLATION LEVEL READ COMMITTED  -- none repeatable read
SET TRANSACTION ISOLATION LEVEL REPEATABLE READ
BEGIN TRAN
UPDATE PRODUCT
SET Quatity = 500
WHERE ID =2
COMMIT


--T2
-- SET TRANSACTION ISOLATION LEVEL REPEATABLE READ  --phantom read
SET TRANSACTION ISOLATION LEVEL SERIALIZABLE
BEGIN TRAN
INSERT INTO PRODUCT VALUES(7,'STH2',9,10)
COMMIT





